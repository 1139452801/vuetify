@import '../bootstrap'
@import '../theme'

/* Theme */
v-data-table($material)
  background-color: $material.cards
  color: $material.text.primary

  &--fixed
    thead th
      border-bottom: 0px !important
      box-shadow: inset 0 -1px 0 rgba($material.fg-color, $material.divider-percent)

  .v-data-header
    tr
      th
        border-bottom: 1px solid rgba($material.fg-color, $material.divider-percent)
        // box-shadow: inset 0 -1px 0 rgba($material.fg-color, $material.divider-percent)
        background: white
        color: rgba($material.text-color, $material.secondary-text-percent)

      &.sortable
        i
          color: rgba($material.fg-color, $material.disabledORhints-text-percent)

        &:hover
          color: rgba($material.fg-color, $material.primary-text-percent)

        &.active
          color: rgba($material.fg-color, $material.primary-text-percent)

          i
            color: rgba($material.fg-color, $material.primary-text-percent)

  .v-data-table__body
    tr
      &:not(:last-child)
        // box-shadow: inset 0 -1px 0 rgba($material.fg-color, $material.divider-percent)
        border-bottom: 1px solid rgba($material.fg-color, $material.divider-percent)

      &.active
        background: $material.table.active

      &:hover:not(.datatable__expand-row)
        background: $material.table.hover

  .v-table__footer
    .v-row
      border-top: 1px solid rgba($material.fg-color, $material.divider-percent)

theme(v-data-table, "v-data-table")

.v-data-table
  table
    overflow-x: auto
    width: 100%
    max-width: 100%
    border-collapse: collapse

  &--dense
    td
      height: 24px
    th
      height: 32px

  &--fixed
    th
      position: sticky
      top: 0

    .v-table__header, .v-table__actions
      margin-right: 17px

    .v-data-table__wrapper
      overflow-y: scroll

td, th
  // &:not(:nth-child(1)), &:first-child
  padding: 0 16px

.v-cell-checkbox + .v-cell, .v-cell-checkbox + .v-head
  padding-left: 0

.v-data-header
  th
    font-weight: 500
    font-size: 12px
    transition: .3s $transition.swing
    white-space: nowrap
    user-select: none

    &.sortable
      pointer-events: auto
      cursor: pointer
      outline: 0

      i
        font-size: 18px
        display: inline-block
        opacity: 0
        transition: .3s $transition.swing

      &:focus,
      &:hover
        i
          opacity: .6

      &.active
        transform: none

        i
          opacity: 1

        &.desc
          i
            transform: rotate(-180deg)

.v-data-table__body
  .v-row
    transition: background $primary-transition
    will-change: background

  .v-cell
    font-weight: 400
    font-size: 13px

.v-cell-checkbox
  padding-right: 12px

  .v-input
    margin-top: 0
    padding-top: 0

  .v-input--selection-controls__input
    margin-right: 0

td
  height: 47px

th
  height: 48px

  .badge
    display: inline-flex
    justify-content: center
    border: 0px
    border-radius: 50%
    background-color: lightgrey // TODO: theme
    min-width: 16px
    min-height: 16px
    height: 16px
    width: 16px
    color: white // TODO: theme
    font-size: 0.8rem

th
  font-weight: bold

tr > th
  white-space: normal

.v-row, .v-row-expandable
  &:not(:last-child)
    .v-cell
      border-bottom: 1px solid rgba(0,0,0,.12) // TODO: theme

.v-cell, .v-head
  word-break: break-word
  overflow: hidden
  text-overflow: ellipsis

/** Actions */
.v-data-table__actions
  display: flex
  justify-content: flex-end
  align-items: center
  font-size: 12px

  .v-btn
    color: inherit

    &:last-of-type
      margin-left: 14px

  &__range-controls
    display: flex
    align-items: center
    min-height: 48px

  &__pagination
    display: block
    text-align: center
    margin: 0 32px 0 24px

  &__select
    display: flex
    align-items: center
    justify-content: flex-end
    margin-right: 14px
    white-space: nowrap

    .v-select
      flex: 0 1 0
      margin: 13px 0 13px 34px
      padding: 0
      position: initial

    .v-select__selections
      flex-wrap: nowrap

      .v-select__selection--comma
        font-size: 12px

.v-data-table__progress
  height: auto !important

  .v-row, .v-cell, .v-head
    height: auto !important
    border: none !important

    .v-progress-linear
      margin: 0

.v-row-expandable
  &__wrapper
    transition: all 0.3s ease-out

.v-data-table__expand
  &-row
    border: none !important

  &-col
    padding: 0 !important
    height: 0px !important

    &--expanded
      border-bottom: 1px solid rgba(0,0,0,0.12) // TODO: theme

  &-content
    transition: height $primary-transition

    > .card
      border-radius: 0
      box-shadow: none

.v-row-group
  &__header
    background: lightgrey
